# E10: Open geospatial Data

## Warm Up
### Open Source vs Closed Source
Before diving into **open geospatial data**, let’s pause and think about a bigger question:
> What does it mean for software or data to be *open*?  

Here’s a basic comparison between **open-source** and **closed-source (proprietary)** software:
| Feature                  | Open Source                           | Closed Source                            |
|--------------------------|----------------------------------------|-------------------------------------------|
| **Access to Code**       | Fully visible and editable             | Hidden from the public                    |
| **Usage Rights**         | Usually free to use and modify         | Requires license or payment               |
| **Community Contribution**| Anyone can contribute or fork         | Only internal developers can edit         |
| **Security**             | Transparent (bugs visible & fixable)   | Obscured (depends on vendor response)     |
| **Examples**             | QGIS, Linux, Python, PostgreSQL        | ArcGIS, Windows, Google Earth Pro         |

- **Operating Systems**:  
  In the 90s and 2000s, Linux rose as a symbol of open-source power — challenging Microsoft Windows in server and academic environments. The **GNU/Linux** movement showed that free and open software could be reliable and secure.

- **Modern AI and LLMs**:  
  Today, the open vs closed debate reappears in AI.  
  - Closed: ChatGPT, Gemini, Claude  
  - Open: [Meta’s LLaMA](https://ai.meta.com/llama/), [DeepSeek](https://huggingface.co/deepseek-ai), Mistral  
  Open models allow researchers and developers to experiment freely and drive innovation.  

> Open-source LLMs are especially valuable because training foundational models is largely limited to a few big tech companies. For other companies and universities, it’s just impossible to train such models from scratch. Open-source releases make it possible for researchers and startups to study, fine-tune, and deploy models locally. This openness has enabled a wave of innovation in AI applications, allowing broader participation rather than leaving the field entirely dominated by tech giants.

### Open Source Licenses: What’s Allowed?

Just because something is open-source doesn’t mean you can do anything with it.

Different licenses come with different freedoms and responsibilities. Here are a few major ones:

| License       | Key Characteristics                                                                 | Example Projects        |
|---------------|---------------------------------------------------------------------------------------|-------------------------|
| **GNU GPL**   | Copyleft license: requires derived works to also be open under GPL                   | [Linux](https://www.linux.org/), [QGIS](https://qgis.org/)             |
| **MIT**       | Very permissive: allows reuse in open or closed projects with minimal conditions     | [React](https://react.dev/), [Leaflet.js](https://leafletjs.com/)       |
| **Apache 2.0**| Similar to MIT but with explicit patent protection                                   | [PyTorch](https://pytorch.org/), [VS Code](https://code.visualstudio.com/)     |
| **Creative Commons (CC)** | Often used for open data or content, e.g., maps or images                | [OpenStreetMap (CC BY-SA)](https://www.openstreetmap.org/#map=6/51.33/10.45)|

> The **GNU GPL (General Public License)** ensures that *if you share a modified version*, it must stay open and free for others.

Even in commercial contexts, **open and closed often co-exist**:

- Microsoft now supports Linux and open-source tools (like GitHub).
- ESRI’s ArcGIS is closed-source, but supports open formats (GeoJSON, Shapefile) and integrates with open Python libraries.
- Facebook uses PyTorch (open-source), but builds closed AI products.
#### Why People(Include me) Still Believe in Open Source

Despite business pressures, many developers (myself included!) continue to believe:

> "Open-source helps humanity. It enables learning, collaboration, and shared progress."

- You can learn from the best by reading real code.
- You can adapt tools to your needs — especially important in underfunded communities or research.
- You can **build upon others’ work instead of starting from scratch**.

### OpenGIS
The concept of OpenGIS encompasses two core pillars that establish a comprehensive framework of *Standards, Tools, and Data*:
- Open Standards: Defined primarily by the OGC (Open Geospatial Consortium), these standards ensure interoperability, allowing different systems to communicate seamlessly without vendor lock-in.
- Open Source: This refers to the [FOSS4G (Free and Open Source Software for Geospatial)](https://www.osgeo.org/initiatives/foss4g/) ecosystem, which provides accessible software tools such as QGIS, PostGIS, and GeoServer.

#### The Philosophy
Interoperability: This is the soul of OpenGIS. It ensures that different software systems communicate effectively. Through these standards, web browsers display satellite maps seamlessly, and proprietary software reads open-source data without compatibility issues.

#### The Standards
The [OGC (Open Geospatial Consortium)](https://www.ogc.org/) standards serve as the "universal language" for the industry.
- **Data Service Standards**:
    1. WMS (Web Map Service): Transmits rendered map images (map tiles) for display.
    2. WFS (Web Feature Service): Transmits actual vector data objects (points, lines, polygons) for analysis.
    3. WCS (Web Coverage Service): Transmits coverage data containing raw pixel values, such as elevation or temperature models.
- **Data Format Standards**: Includes GeoPackage (a modern, efficient alternative to Shapefiles), GeoJSON (for web use), and KML.

#### The Stack
The FOSS4G (Free and Open Source Software for Geospatial) ecosystem offers robust tools for every layer of the application.
- Database Layer (Storage): PostgreSQL + PostGIS. This combination acts as the industry de facto standard for spatial data storage.
- Server Layer (Publishing): GeoServer or MapServer. These tools publish stored data to the web using OGC standards.
- Desktop Layer (Analysis): QGIS. This is the primary interface for professionals to analyze data and design maps.
- Client Layer (Visualization): Leaflet, OpenLayers, or MapLibre GL. These libraries enable the rendering of interactive maps in web browsers.
- Processing Layer (Library): GDAL/OGR. This library functions as the cornerstone of almost all GIS software, handling data translation and processing.

#### Open Data
- **OpenStreetMap (OSM)**: Functioning as the "Wikipedia" of the mapping world, this project relies on VGI (Volunteered Geographic Information) to build a global, community-maintained dataset.
- **Government Open Data**: Agencies such as NASA and ESA (Sentinel Hub) provide open access to vast amounts of remote sensing and satellite imagery.


## Task
### Description


### Data


### 1. Plugins and Basemap Services
In *ArcGIS*, adding high-quality imagery like Google or Bing Maps usually requires:
- Complicated configuration
- Paid services
- Or reliance on slower official basemaps

In contrast, **QGIS** offers a more flexible, open solution using community-developed plugins.
1. Open the **QGIS Plugin Manager**(Plugins -> Manage and Install Plugins...)
2. Search and install the following:
   - `QuickMapServices` – for basemaps  
   - `QuickOSM` – for OpenStreetMap vector data  

> The QGIS plugin ecosystem is powered by global contributors and updates frequently — one of the reasons QGIS is so powerful. This is why we love open-source: it allows contributions from people all around the world, not just a small group of engineers in commercial companies like Esri.

#### Load Multi-Source Basemaps from `QuickMapServices`
1. Open the *Settings* of this plugin.
2. In *More services* page, select the *Get contributed pack*
3. Then you can load various basemaps in a single click:
  - Google Satellite  
  - OpenStreetMap Standard  
  - CartoDB Dark Matter *(dark background, great for data visualization)*

```{figure} ../images/ex10/osm_getpack.png
---
name: oms_plugin
---
OMS Tool Bar
```
```{figure} ../images/ex10/oms_settings.png
---
name: oms_settings
---
OMS Settings
```
```{figure} ../images/ex10/osm_esri.png
---
name: oms_esri_demo
---
Demo of loading data from OMS
```

#### Load Multi-Source Basemaps from `QuickOSM`
The traditional workflow for acquiring city-scale spatial data is:
1. Search and download a Shapefile from a website  
2. Unzip it  
3. Clean the data  
4. Import into your GIS software  

But with **QGIS + QuickOSM**, you can skip all of that — and request data directly from OpenStreetMap (OSM) in seconds.
1. Open the **QuickOSM** plugin and *quick query* page
2. Set the following fields:
```text
Key: shop       Value: convenience
```
3.	Choose the location:
	-	Canvas Extent (the current visible map area), or
	-	Type a city name (e.g., “Beijing”)
4.	Click Run Query

```{figure} ../images/ex10/osm_query.png
---
name: osm_query_page
---
Example of query in *QuickOSM*
```
> You can change the **Overpass API** in **Parameter** page of OSM if you find query is super slow.
5.  Analyze
  - The data will be downloaded and added directly to your QGIS project as a new vector layer.
	-	Open the attribute table to explore the OSM tag system.
	-	You’ll see a wide range of metadata from contributors worldwide.
  - You can try with a wide range of queries, including different keywords and boundaries. You can also export the query results for further use.
6. Export layers
Simply right-click the layer and select “Export” → “Save Features As…”. Choose your preferred format and adjust the settings as needed. You can also download raster tiles using the *Generate XYZ Tiles(Directory)* tool.
```{figure} ../images/ex10/osm_export_tiles.png
---
name: osm_export_tiles
---
Download Raster Tiles using Raster Tools
```

### 2. Open Processing Toolbox
ArcGIS provides a powerful toolbox, but it is largely *closed and proprietary*.
In contrast, QGIS integrates a wide variety of third-party geospatial engines, including:
- [GRASS GIS](https://grass.osgeo.org/learn/)
- [SAGA GIS](https://saga-gis.sourceforge.io/en/index.html) 
- [GDAL](https://gdal.org/en/stable/)
- [Many Python-based tools](https://plugins.qgis.org/plugins/)

These are all accessible through one unified interface: the **Processing Toolbox**.
1. Open the **Processing Toolbox** panel in QGIS.
2. Instead of using the default QGIS **Buffer** tool, try using:
   - **GRASS → v.buffer**
   - **SAGA → Rasterize**
   - **SAGA → Kernel Density Estimation**

3. Observe the flexibility and different parameter options offered by these tools.

> QGIS is more than just a GIS software — it's a graphical front-end that orchestrates a wide range of open-source geospatial engines. You're using GRASS, SAGA, GDAL, and others all at once, without even leaving the interface.


### 3: Analyze and Compare Road Networks

Use two sources of road data: official shapefile vs. OSM data.

**Steps:**
- Load both layers into QGIS.
- Use topology tools to check connectivity.
- Compare coverage using `Difference` or `Intersection`.
- Count and visualize roads missing from one dataset.
- Optional: Buffer main roads and analyze coverage of public amenities.

---

### Task 3: Spatial Analysis with OSM Features

**Example use case:** Are schools evenly distributed across districts?

**Steps:**
- Use OSM school POIs.
- Use `Count points in polygon` to aggregate by district.
- Normalize by area or population (if available).
- Visualize as a choropleth map.

---

### Advanced Task

- Write your own Overpass API query using [Overpass Turbo](https://overpass-turbo.eu/)
- Export the result as GeoJSON and import into QGIS.
- Try querying different `amenity`, `landuse`, or `public_transport` tags.


## References

- [OpenStreetMap Wiki](https://wiki.openstreetmap.org/wiki/Main_Page)
- [QGIS Documentation](https://docs.qgis.org/)
- [QuickOSM Plugin Documentation](https://github.com/3liz/QuickOSM)
- [Overpass Turbo Guide](https://wiki.openstreetmap.org/wiki/Overpass_turbo)

## Materials

- [OpenStreetMap Data for GIS Users](https://wiki.openstreetmap.org/wiki/Using_OpenStreetMap_data)
- [Geofabrik Download Server](https://download.geofabrik.de/)
- [QGIS: Working with Vector Data](https://docs.qgis.org/3.28/en/docs/user_manual/working_with_vector/index.html)
- [Open Mapping for Development, UN](https://data.un.org/portal/unsd/open-mapping-for-development)